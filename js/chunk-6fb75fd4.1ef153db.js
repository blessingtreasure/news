(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fb75fd4"],{"022d":function(t,a,n){"use strict";var s=n("07b9"),i=n.n(s);i.a},"07b9":function(t,a,n){},2205:function(t,a,n){"use strict";var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"listbar"},[t._t("listbar",[n("router-link",{attrs:{to:t.link||"#"}},[n("div",{staticClass:"label"},[t._v(t._s(t.label))]),n("div",{staticClass:"tips"},[n("span",[t._v(t._s(t.tips))]),n("i",{staticClass:"iconfont iconjiantou1"})])])])],2)},i=[],e={props:["label","tips","link"],methods:{jumpto:function(t){this.$router.push(t)}}},o=e,c=(n("022d"),n("2877")),r=Object(c["a"])(o,s,i,!1,null,null,null);a["a"]=r.exports},6961:function(t,a,n){},"9d8d":function(t,a,n){"use strict";var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"back"},[t._t("back",[n("i",{staticClass:"iconfont iconjiantou2",on:{click:t.forback}})])],2),n("div",{staticClass:"title"},[t._t("title",[n("h4",[t._v("个人中心")])])],2),n("div",{staticClass:"info"},[t._t("info")],2)])},i=[],e={methods:{forback:function(){this.$router.back()}}},o=e,c=(n("e594"),n("2877")),r=Object(c["a"])(o,s,i,!1,null,null,null);a["a"]=r.exports},b8f0:function(t,a,n){"use strict";n.r(a);var s=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"container"},[n("navbar",{staticClass:"navbar"},[n("div",{staticClass:"back",attrs:{slot:"back"},slot:"back"},[n("i",{staticClass:"iconfont iconjiantou2",on:{click:function(a){return t.$router.back()}}})]),n("h4",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("个人中心")])]),n("div",{staticClass:"user_pic"},[n("img",{attrs:{src:t.$axios.defaults.baseURL+t.userinfo.head_img,alt:""}}),n("van-uploader",{attrs:{"after-read":t.afterRead}})],1),n("div",{staticClass:"user_info"},[n("listbar",{attrs:{label:"昵称",tips:t.userinfo.nickname},nativeOn:{click:function(a){t.show=!0}}}),n("listbar",{attrs:{label:"密码",tips:"******"},nativeOn:{click:function(a){t.ispassword=!0}}}),n("listbar",{attrs:{label:"性别",tips:["女","男"][t.userinfo.gender]},nativeOn:{click:function(a){t.showgender=!0}}}),n("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:t.changenickname},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:t.nickname,callback:function(a){t.nickname=a},expression:"nickname"}})],1),n("van-dialog",{attrs:{title:"修改密码","show-cancel-button":""},on:{confirm:t.changepassword},model:{value:t.ispassword,callback:function(a){t.ispassword=a},expression:"ispassword"}},[n("van-field",{attrs:{type:"password",placeholder:"请输入要修改的密码"},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消","close-on-click-action":""},on:{select:t.onSelect},model:{value:t.showgender,callback:function(a){t.showgender=a},expression:"showgender"}})],1)],1)},i=[],e=n("9d8d"),o=n("2205"),c={data:function(){return{userinfo:{},token:"",show:!1,ispassword:!1,showgender:!1,nickname:"",password:"",actions:[{name:"男",value:1},{name:"女",value:0}]}},mounted:function(){var t=this,a=JSON.parse(localStorage.getItem("user_info"))||{};this.token=a.token,this.$axios({url:"/user/".concat(a.user.id),method:"get",headers:{Authorization:this.token}}).then((function(a){var n=a.data.data;t.userinfo=n,t.nickname=n.nickname}))},methods:{afterRead:function(t){var a=this,n=new FormData;n.append("file",t.file),this.$axios({url:"/upload",method:"POST",headers:{Authorization:this.token},data:n}).then((function(t){var n=t.data.data.url;a.userinfo.head_img=n,a.handleEdit({head_img:n})}))},handleEdit:function(t){var a=this;return this.$axios({url:"/user_update/"+this.userinfo.id,method:"POST",headers:{Authorization:this.token},data:t}).then((function(t){console.log(t),a.$toast.success("修改成功")}))},changenickname:function(){var t=this,a=this.handleEdit({nickname:this.nickname});a.then((function(){t.userinfo.nickname=t.nickname}))},changepassword:function(){this.handleEdit({password:this.password}),this.userinfo.password=this.password,this.show=!1},onSelect:function(t){console.log(t),this.handleEdit({gender:t.value}),this.userinfo.gender=t.value}},components:{navbar:e["a"],listbar:o["a"]}},r=c,l=(n("d032"),n("2877")),u=Object(l["a"])(r,s,i,!1,null,"2ab7c862",null);a["default"]=u.exports},d032:function(t,a,n){"use strict";var s=n("6961"),i=n.n(s);i.a},d0cd:function(t,a,n){},e594:function(t,a,n){"use strict";var s=n("d0cd"),i=n.n(s);i.a}}]);
//# sourceMappingURL=chunk-6fb75fd4.1ef153db.js.map