(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3021d94e"],{"0823":function(t,e,a){"use strict";var n=a("3769"),i=a.n(n);i.a},1e3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("navbar",{staticClass:"navbar"},[a("div",{staticClass:"back",attrs:{slot:"back"},slot:"back"},[a("i",{staticClass:"iconfont iconjiantou2",on:{click:function(e){return t.$router.back()}}})]),a("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-logo1"})]),a("div",{staticClass:"info",class:t.articel.has_follow?"":"guanzhu",attrs:{slot:"info"},on:{click:t.hasfollow},slot:"info"},[t._v(t._s(t.articel.has_follow?"已关注":"关注"))])]),a("header",[a("h4",[t._v(t._s(t.articel.title))]),a("div",{staticClass:"sub-title"},[a("span",[t._v(t._s(t.articel.user.nickname))]),a("span",[t._v(t._s(t.moment(t.articel.user.create_date).format("YYYY-MM-DD hh:mm:ss")))])])]),a("article",[1==t.articel.type?a("p",{domProps:{innerHTML:t._s(t.articel.content)}}):t._e(),2==t.articel.type?a("video",{attrs:{src:t.$axios.defaults.baseURL+t.articel.content,controls:"",autoplay:""}}):t._e(),a("div",{staticClass:"option"},[a("div",{staticClass:"opt-item",on:{click:t.dianzan}},[a("i",{staticClass:"iconfont icondianzan",class:{dianzan:t.articel.has_like}}),a("span",[t._v(t._s(t.articel.has_like?1:""))])]),t._m(0)])]),a("section",[a("comments")],1),a("footer",{staticClass:"myfooter"},[t._m(1),a("div",{staticClass:"icon-info"},[a("router-link",{attrs:{to:"/comment/"+this.$route.params.id}},[a("div",{staticClass:"icons pinglun"},[a("span",{staticClass:"iconfont iconpinglun-"}),a("div",{class:{active:t.articel.comment_length>=1}})])]),a("div",{staticClass:"icons"},[a("span",{staticClass:"iconfont iconshoucang",class:{active:t.articel.has_star},on:{click:t.collect}})]),t._m(2)],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"opt-item"},[a("i",{staticClass:"iconfont iconweixin"}),a("span",[t._v("微信")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment"},[a("input",{attrs:{type:"text",name:"",id:"",placeholder:"写点什么吧"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icons"},[a("span",{staticClass:"iconfont iconfenxiang"})])}],s=(a("ac1f"),a("5319"),a("9d8d")),c=a("c1df"),r=a.n(c),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.comment,(function(e,n){return a("div",{key:n,staticClass:"comment"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"header"},[a("img",{attrs:{src:t.$axios.defaults.baseURL+e.user.head_img,alt:""}})]),a("div",{staticClass:"text"},[a("h4",[t._v(t._s(e.user.nickname))]),a("div",{staticClass:"content"},[t._v(t._s(e.content))]),a("div",[a("span",{staticClass:"time"},[t._v(t._s(t.moment(e.create_date).fromNow()))]),a("div",{staticClass:"apply"},[t._v("回复")])])])]),e.parent?a("commentitem",{attrs:{data:e.parent}}):t._e()],1)})),0)],1)},l=[],u=(a("99af"),a("2909")),d=a("dc48"),f={data:function(){return{comment:"",moment:r.a,pid:"",loading:!1,finished:!1,pageIndex:1,pageSize:5}},mounted:function(){var t=this.$route.params.id;this.pid=t,this.getcomment()},methods:{onLoad:function(){this.getcomment()},getcomment:function(){var t=this;this.$axios({url:"/post_comment/".concat(this.pid),method:"get",params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then((function(e){var a=e.data.data;t.comment=[].concat(Object(u["a"])(a),Object(u["a"])(t.comment)),t.pageIndex++,t.loading=!1,a.length<t.pageSize&&(t.finished=!0),console.log(t.comment)})).catch((function(t){console.log(t)}))}},components:{navbar:s["a"],commentitem:d["a"]}},h=f,v=(a("1e0b"),a("2877")),p=Object(v["a"])(h,o,l,!1,null,"76d9f423",null),m=p.exports,_={mounted:function(){var t=this,e=JSON.parse(localStorage.getItem("user_info"))||"",a=e.token;this.token=a,this.$axios({url:"/post/".concat(this.$route.params.id),method:"get"}).then((function(e){var a=e.data.data;a.conent=a.content.replace(/http:\/\/localhost:3000/gi,t.$axios.defaults.baseURL),t.articel=a}))},data:function(){return{token:"",articel:{user:{}},moment:r.a}},methods:{hasfollow:function(){var t=this,e="";e=this.articel.has_follow?"/user_unfollow/".concat(this.articel.user.id):"/user_follows/".concat(this.articel.user.id),this.$axios({url:e,headers:{Authorization:this.token}}).then((function(e){console.log(t.articel),t.articel.has_follow=!t.articel.has_follow,t.$toast(t.articel.has_follow?"关注成功":"取消关注成功")}))},dianzan:function(){var t,e=this;t=(this.articel.has_like,"/post_like/".concat(this.$route.params.id)),this.$axios({url:t,headers:{Authorization:this.token}}).then((function(t){console.log(t),e.articel.has_like=!e.articel.has_like}))},collect:function(){var t,e=this;t=(this.articel.has_star,"/post_star/".concat(this.$route.params.id)),this.$axios({url:t,headers:{Authorization:this.token}}).then((function(t){console.log(t),e.articel.has_star=!e.articel.has_star,e.$toast(e.articel.has_star?"收藏成功":"取消收藏成功")}))}},components:{navbar:s["a"],comments:m}},g=_,x=(a("0823"),Object(v["a"])(g,n,i,!1,null,"0cbceb34",null));e["default"]=x.exports},"14c3":function(t,e,a){var n=a("c6b6"),i=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var s=a.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"1e0b":function(t,e,a){"use strict";var n=a("32b3"),i=a.n(n);i.a},"32b3":function(t,e,a){},3769:function(t,e,a){},5319:function(t,e,a){"use strict";var n=a("d784"),i=a("825a"),s=a("7b0b"),c=a("50c4"),r=a("a691"),o=a("1d80"),l=a("8aa5"),u=a("14c3"),d=Math.max,f=Math.min,h=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,a,n){var _=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,x=_?"$":"$0";return[function(a,n){var i=o(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,i,n):e.call(String(i),a,n)},function(t,n){if(!_&&g||"string"===typeof n&&-1===n.indexOf(x)){var s=a(e,t,this,n);if(s.done)return s.value}var o=i(t),h=String(this),v="function"===typeof n;v||(n=String(n));var p=o.global;if(p){var b=o.unicode;o.lastIndex=0}var C=[];while(1){var $=u(o,h);if(null===$)break;if(C.push($),!p)break;var k=String($[0]);""===k&&(o.lastIndex=l(h,c(o.lastIndex),b))}for(var y="",w=0,R=0;R<C.length;R++){$=C[R];for(var S=String($[0]),I=d(f(r($.index),h.length),0),T=[],A=1;A<$.length;A++)T.push(m($[A]));var U=$.groups;if(v){var P=[S].concat(T,I,h);void 0!==U&&P.push(U);var O=String(n.apply(void 0,P))}else O=E(S,h,I,T,U,n);I>=w&&(y+=h.slice(w,I)+O,w=I+S.length)}return y+h.slice(w)}];function E(t,a,n,i,c,r){var o=n+t.length,l=i.length,u=p;return void 0!==c&&(c=s(c),u=v),e.call(r,u,(function(e,s){var r;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,n);case"'":return a.slice(o);case"<":r=c[s.slice(1,-1)];break;default:var u=+s;if(0===u)return e;if(u>l){var d=h(u/10);return 0===d?e:d<=l?void 0===i[d-1]?s.charAt(1):i[d-1]+s.charAt(1):e}r=i[u-1]}return void 0===r?"":r}))}}))},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},9263:function(t,e,a){"use strict";var n=a("ad6d"),i=a("9f7f"),s=RegExp.prototype.exec,c=String.prototype.replace,r=s,o=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=o||u||l;d&&(r=function(t){var e,a,i,r,d=this,f=l&&d.sticky,h=n.call(d),v=d.source,p=0,m=t;return f&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(v="(?: "+v+")",m=" "+m,p++),a=new RegExp("^(?:"+v+")",h)),u&&(a=new RegExp("^"+v+"$(?!\\s)",h)),o&&(e=d.lastIndex),i=s.call(f?a:d,m),f?i?(i.input=i.input.slice(p),i[0]=i[0].slice(p),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:o&&i&&(d.lastIndex=d.global?i.index+i[0].length:e),u&&i&&i.length>1&&c.call(i[0],a,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),t.exports=r},"99af":function(t,e,a){"use strict";var n=a("23e7"),i=a("d039"),s=a("e8b5"),c=a("861d"),r=a("7b0b"),o=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),f=a("b622"),h=a("2d00"),v=f("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",_=h>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),g=d("concat"),x=function(t){if(!c(t))return!1;var e=t[v];return void 0!==e?!!e:s(t)},E=!_||!g;n({target:"Array",proto:!0,forced:E},{concat:function(t){var e,a,n,i,s,c=r(this),d=u(c,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?c:arguments[e],x(s)){if(i=o(s.length),f+i>p)throw TypeError(m);for(a=0;a<i;a++,f++)a in s&&l(d,f,s[a])}else{if(f>=p)throw TypeError(m);l(d,f++,s)}return d.length=f,d}})},"9f7f":function(t,e,a){"use strict";var n=a("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,a){"use strict";var n=a("23e7"),i=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ce0c:function(t,e,a){},d784:function(t,e,a){"use strict";a("ac1f");var n=a("6eeb"),i=a("d039"),s=a("b622"),c=a("9263"),r=a("9112"),o=s("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=s("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var v=s(t),p=!i((function(){var e={};return e[v]=function(){return 7},7!=""[t](e)})),m=p&&!i((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[o]=function(){return a},a.flags="",a[v]=/./[v]),a.exec=function(){return e=!0,null},a[v](""),!e}));if(!p||!m||"replace"===t&&(!l||!u||f)||"split"===t&&!h){var _=/./[v],g=a(v,""[t],(function(t,e,a,n,i){return e.exec===c?p&&!i?{done:!0,value:_.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),x=g[0],E=g[1];n(String.prototype,t,x),n(RegExp.prototype,v,2==e?function(t,e){return E.call(t,this,e)}:function(t){return E.call(t,this)})}d&&r(RegExp.prototype[v],"sham",!0)}},dc48:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"comment-item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"header"},[a("img",{attrs:{src:t.$axios.defaults.baseURL+t.data.user.head_img,alt:""}})]),a("div",{staticClass:"text"},[a("h4",[t._v(t._s(t.data.user.nickname))]),a("div",{staticClass:"content"},[t._v(t._s(t.data.content))]),a("div",[a("span",{staticClass:"time"},[t._v(t._s(t.moment(t.data.create_date).fromNow()))]),a("div",{staticClass:"apply",on:{click:function(e){return t.myclick(t.data)}}},[t._v("回复")])])])]),t.data.parent?a("commentitem",{attrs:{data:t.data.parent},on:{reply:t.myclick}}):t._e()],1)])},i=[],s=a("c1df"),c=a.n(s),r={name:"commentitem",props:["data"],data:function(){return{moment:c.a}},methods:{myclick:function(t){this.$emit("reply",this.data)}}},o=r,l=(a("dd99"),a("2877")),u=Object(l["a"])(o,n,i,!1,null,"2a68004c",null);e["a"]=u.exports},dd99:function(t,e,a){"use strict";var n=a("ce0c"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-3021d94e.dfe843fa.js.map