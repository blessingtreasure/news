(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b8234b5"],{"1e4b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("navbar",{staticClass:"navbar",nativeOn:{click:function(e){return t.tosearch(e)}}},[s("i",{staticClass:"iconfont icon-logo1",attrs:{slot:"back"},slot:"back"}),s("van-search",{attrs:{slot:"title",placeholder:"请输入搜索关键词"},slot:"title",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),s("div",{staticClass:"iconfont icon-fabu",attrs:{slot:"info"},slot:"info"})],1),s("van-sticky",{attrs:{"offset-top":0}},[s("van-tabs",{attrs:{id:"tab_menu",swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.categories,(function(e,a){return 1==e.is_top?s("van-tab",{key:a,attrs:{title:e.name}}):t._e()})),s("router-link",{staticClass:"iconfont icon-gengduo",attrs:{to:"/cloumn"}})],2)],1),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("div",{staticClass:"mp-30"}),s("keep-alive",[s("listsitem",{attrs:{news:t.categories[this.active].list}})],1),s("van-list",{attrs:{finished:t.finished,"finished-text":"----我是有底线的----","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1),s("toolbar",[s("div",{attrs:{slot:"home"},slot:"home"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"iconfont icon-remen",staticStyle:{color:"#ed4044"}}),s("p",{staticStyle:{color:"#da4938"}},[t._v("头条")])])])])],1)},i=[],n=(s("99af"),s("d81d"),s("b0c0"),s("2909")),o=s("7546"),c=s("9d8d"),r=s("f416"),l={name:"index",activated:function(){var t=JSON.parse(localStorage.getItem("column")),e=JSON.parse(localStorage.getItem("user_info"))||"";e.token;this.categories=t,this.getlists()},mounted:function(){var t=JSON.parse(localStorage.getItem("column")),e=JSON.parse(localStorage.getItem("user_info"))||"",s=e.token;this.token=s,s&&t?"关注"==t[0].name?(this.categories=t,this.getlists()):t&&"关注"!==t[0].name&&this.getListItem(s,t):this.getListItem(s,t)},data:function(){return{loading:!1,finished:!1,refreshing:!1,pageIndex:1,token:"",value:"",active:0,categories:[{}],news:[]}},watch:{active:function(){this.getlists()}},methods:{tosearch:function(){this.$router.push("/search")},handleCategories:function(){this.categories=this.categories.map((function(t){return t.pageIndex=1,t.list=[],t.finished=!1,t.loading=!1,t.scrollY=0,t})),localStorage.setItem("column",JSON.stringify(this.categories))},getlists:function(){var t=this,e=this.categories[this.active],s=e.id,a=e.pageIndex;e.finished,e.list;console.log("栏目"+s,a+"页"),this.categories[this.active].finished||this.$axios({url:"/post",methods:"get",params:{pageIndex:a,pageSize:5,category:s},headers:{Authorization:this.token||""}}).then((function(e){var s=e.data,a=s.data,i=s.total;if(t.categories[t.active].list=[].concat(Object(n["a"])(t.categories[t.active].list),Object(n["a"])(a)),t.categories=Object(n["a"])(t.categories),t.categories[t.active].list.length>=i-1)return t.finished=!0,t.categories[t.active].finished=!0,t.loading=!1,void(t.categories[t.active].loading=!1);t.loading=!1})).catch((function(t){console.log(t)}))},getListItem:function(t,e){var s=this;t||t&&e?this.$axios({url:"/category",methods:"get",headers:{Authorization:t}}).then((function(t){s.categories=t.data.data,s.handleCategories(),s.getlists()})).catch((function(t){console.log(t)})):this.$axios({url:"/category",methods:"get"}).then((function(t){console.log("未登录"),s.categories=t.data.data,s.handleCategories(),s.getlists()})).catch((function(t){console.log(t)}))},onLoad:function(){this.categories[this.active].pageIndex++,this.getlists()},onRefresh:function(){this.refreshing=!1}},components:{toolbar:o["a"],navbar:c["a"],listsitem:r["a"]}},u=l,d=(s("bbcd"),s("2877")),f=Object(d["a"])(u,a,i,!1,null,"57409fd8",null);e["default"]=f.exports},"25b1":function(t,e,s){},"73ac":function(t,e,s){},7546:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/index"}},[t._t("home",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"iconfont icon-remen"}),s("p",[t._v("头条")])])])],2)],1),s("li",[s("router-link",{attrs:{to:"/cloumn"}},[t._t("column",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"iconfont icon-huodongmulupeizhi"}),s("p",[t._v("栏目")])])])],2)],1),s("li",[s("router-link",{attrs:{to:"#"}},[t._t("notice",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"iconfont icon-xiaoxi"}),s("p",[t._v("消息")])])])],2)],1),s("li",[s("router-link",{attrs:{to:"/myuser"}},[t._t("myself",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"iconfont icon-wode"}),s("p",[t._v("我的")])])])],2)],1)])])},i=[],n={},o=n,c=(s("a500"),s("2877")),r=Object(c["a"])(o,a,i,!1,null,null,null);e["a"]=r.exports},"99af":function(t,e,s){"use strict";var a=s("23e7"),i=s("d039"),n=s("e8b5"),o=s("861d"),c=s("7b0b"),r=s("50c4"),l=s("8418"),u=s("65f0"),d=s("1dde"),f=s("b622"),h=s("2d00"),v=f("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",m=h>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=d("concat"),_=function(t){if(!o(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},C=!m||!b;a({target:"Array",proto:!0,forced:C},{concat:function(t){var e,s,a,i,n,o=c(this),d=u(o,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?o:arguments[e],_(n)){if(i=r(n.length),f+i>g)throw TypeError(p);for(s=0;s<i;s++,f++)s in n&&l(d,f,n[s])}else{if(f>=g)throw TypeError(p);l(d,f++,n)}return d.length=f,d}})},"9dcb":function(t,e,s){"use strict";var a=s("25b1"),i=s.n(a);i.a},a500:function(t,e,s){"use strict";var a=s("ff95"),i=s.n(a);i.a},bbcd:function(t,e,s){"use strict";var a=s("73ac"),i=s.n(a);i.a},d81d:function(t,e,s){"use strict";var a=s("23e7"),i=s("b727").map,n=s("1dde"),o=s("ae40"),c=n("map"),r=o("map");a({target:"Array",proto:!0,forced:!c||!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},f416:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},t._l(t.news,(function(e,a){return s("div",{key:"style1"+a,on:{click:function(s){return t.todetail(e.id)}}},[1===e.type&&1==e.cover.length?s("div",{staticClass:"style1"},[s("div",{staticClass:"left"},[s("h4",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"sub-title"},[s("span",{staticClass:"sub"},[t._v(t._s(e.user.nickname))]),s("span",{staticClass:"count"},[t._v(t._s(e.comment_length)+"跟帖")])])]),s("div",{staticClass:"right"},t._l(e.cover,(function(e,a){return s("img",{key:a,attrs:{src:t.$axios.defaults.baseURL+e.url,alt:""}})})),0)]):t._e(),1===e.type&&e.cover.length>=2?s("div",{staticClass:"style2",on:{click:function(s){return t.todetail(e.id)}}},[s("h4",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"pic"},t._l(e.cover,(function(e,a){return s("div",{key:"style3"+a},[s("img",{attrs:{src:t.$axios.defaults.baseURL+e.url,alt:""}})])})),0),s("div",{staticClass:"sub-title"},[s("span",[t._v(t._s(e.user.nickname))]),s("span",{staticClass:"count"},[t._v(t._s(e.comment_length))])])]):t._e(),2==e.type?s("div",{staticClass:"style3"},[s("h4",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"pic"},[s("img",{attrs:{src:t.$axios.defaults.baseURL+e.cover[0].url,alt:""}}),t._m(0,!0)]),s("div",{staticClass:"sub-title"},[s("span",[t._v(t._s(e.user.nickname))]),s("span",{staticClass:"count"},[t._v(t._s(e.comment_length)+"跟帖")])])]):t._e()])})),0)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cover"},[s("span",{staticClass:"player"},[s("i",{staticClass:"iconfont iconshipin"})])])}],n={updated:function(){},props:{news:Array},methods:{todetail:function(t){this.$router.push({path:"/detail/".concat(t)})}}},o=n,c=(s("9dcb"),s("2877")),r=Object(c["a"])(o,a,i,!1,null,"93a3266c",null);e["a"]=r.exports},ff95:function(t,e,s){}}]);
//# sourceMappingURL=chunk-4b8234b5.6d99f435.js.map